language: java

jdk: openjdk8

env:
  matrix:
  - GRADLE_OPTS="-Dorg.gradle.console=plain"
  global:
  # PUSH_TOKEN_FOR_GITHUB
  - secure: S2D9AdEvdkp07/vjtwM1I0oOjKZ5/a0sJb7YijlYcvQx/Y0pY34ixBUGrp20l05y7+dcDf5jtMAcvarxILUANupQXer3bYm+IGLUm1Lq1JY7Hu4QYiZZDRDQ9YTQ+nBcr5iRzmo6Dr+cG5XiHPg3OK6IWGX0CLbtYKqfB7zF3rkNdg14TE38mRzYiyhU9bE8ltxlqJB8CHuY0uZ+KRoh5Efk2NPtbcjdrlA3ECvJuGWZNxsJ5qvA++RHUtbntAy8LXsa67iDb8cq99zhjcmh+H2S64qJmfgnODYCr+Cg9MpXElJxGBb2hBmDvTl2f9ePZtFVe4erDiPvYVtiKXMj27+t9ccv43972oAlPcUvuhzqIf6XTOIrukvIOS4Rb1SPDENMEMatFeJO/PiEtUOXYwuFLicfs2fnusYUxGdhndwmBV4Xh0ZU1Y+Dlxb2DX/0z9P1ipo7zETW/wT/th/XzIPXMI5GET1F6a03PYMZlxh7x4Sk+OTVJbdT3lAj1W7W5Vz0xGN2KZL7rfpqI0Hl4gtRXofg5afHpFRL7icfZw8z+WQ+hno7vGpOOysW59IVQh4N+/9L4fMA8vFW1T83YmzzTa5bXu2QezLKAGPOkQz6P5mLjFASc14RLVU+MYSGE7WZpsoBjzBGam/ccysjCwCtmwoWW5BGOTyU7YMfFl0=

install:
- "./gradlew compileJava compileTestJava"

script:
- "./gradlew test"
- "./gradlew dependencyCheckAnalyze"
- "./gradlew dependencyUpdates"
- ".travis/publish-results.sh"

# don't cache gradle dependencies (see: https://docs.travis-ci.com/user/languages/java/#caching)
before_cache:
- rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/wrapper/"
